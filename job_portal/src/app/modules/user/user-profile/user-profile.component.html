<app-header></app-header>
<div class="max-w-4xl mx-auto p-4" *ngIf="profileForm && !isLoading">
    <!-- Success Notification -->
    <div *ngIf="saveSuccess" class="fixed top-4 right-4 z-50">
        <div class="bg-green-500 text-white px-4 py-2 rounded-md shadow-lg flex items-center">
            <i class="fas fa-check-circle mr-2"></i>
            Profile saved successfully!
        </div>
    </div>
    <!-- Error Notification - mandatory field -->
    <div *ngIf="editingSection" class="fixed top-4 left-4 z-50 bg-blue-100 text-blue-800 px-4 py-2 rounded-md text-sm">
        Fields marked with <span class="text-red-500">*</span> are required
    </div>

    <!-- Header Profile Card -->
    <div
        class="bg-white rounded-lg shadow-[0_0_0_1px_rgba(0,0,0,0.08),0_2px_4px_rgba(0,0,0,0.1)] mb-6 p-6 hover:shadow-[0_0_0_1px_rgba(0,0,0,0.12),0_4px_8px_rgba(0,0,0,0.15)] transition-shadow">
        <div class="flex items-start gap-6">
            <!-- Profile Picture -->
            <div class="relative">
                <div
                    class="w-24 h-24 bg-gray-300 overflow-hidden cursor-pointer hover:opacity-90 transition-opacity rounded-lg">
                    <i
                        class="fas fa-user-circle text-gray-500 text-7xl w-full h-full flex items-center justify-center"></i>
                </div>
            </div>

            <!-- Name and Basic Info -->
            <div class="flex-1 min-w-0">
                <div class="flex items-center justify-between mb-2">
                    <h1 class="text-2xl font-bold text-gray-900 truncate pr-2">
                        {{ profileForm.value.name }}
                    </h1>
                    <button (click)="editSection('profile')"
                        class="text-blue-600 hover:text-blue-800 transition-colors flex-shrink-0">
                        <i class="fas fa-edit text-lg"></i>
                    </button>
                </div>
                <p class="text-lg text-gray-700 mb-4">
                    {{ profileForm.value.headline }}
                </p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-gray-600">
                    <div class="flex items-center">
                        <i class="fas fa-envelope w-4 h-4 mr-3 text-gray-500"></i>
                        <span>{{ profileForm.value.email }}</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-phone w-4 h-4 mr-3 text-gray-500"></i>
                        <span>{{ profileForm.value.phone }}</span>
                    </div>
                    <div class="flex items-center md:col-span-2">
                        <i class="fas fa-map-marker-alt w-4 h-4 mr-3 text-gray-500"></i>
                        <span>{{ profileForm.value.location }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Two Column Layout -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Left Column -->
        <div class="lg:col-span-2 space-y-6">
            <!-- About Section -->
            <div
                class="bg-white rounded-lg shadow-[0_0_0_1px_rgba(0,0,0,0.08),0_2px_4px_rgba(0,0,0,0.1)] p-6 hover:shadow-[0_0_0_1px_rgba(0,0,0,0.12),0_4px_8px_rgba(0,0,0,0.15)] transition-shadow">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold text-gray-900">About</h2>
                    <button (click)="editSection('about')" class="text-blue-600 hover:text-blue-800 transition-colors">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <p class="text-gray-700 leading-relaxed whitespace-pre-wrap break-words">
                    {{ profileForm.value.about }}
                </p>
            </div>

            <!-- Experience Section -->
            <div
                class="bg-white rounded-lg shadow-[0_0_0_1px_rgba(0,0,0,0.08),0_2px_4px_rgba(0,0,0,0.1)] p-6 hover:shadow-[0_0_0_1px_rgba(0,0,0,0.12),0_4px_8px_rgba(0,0,0,0.15)] transition-shadow">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold text-gray-900">Experience</h2>
                    <button (click)="editSection('experience')"
                        class="text-blue-600 hover:text-blue-800 transition-colors">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <div class="text-gray-700 leading-relaxed whitespace-pre-wrap break-words">
                    {{ profileForm.value.experience }}
                </div>
            </div>

            <!-- Education Section -->
            <div
                class="bg-white rounded-lg shadow-[0_0_0_1px_rgba(0,0,0,0.08),0_2px_4px_rgba(0,0,0,0.1)] p-6 hover:shadow-[0_0_0_1px_rgba(0,0,0,0.12),0_4px_8px_rgba(0,0,0,0.15)] transition-shadow">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold text-gray-900">Education</h2>
                    <button (click)="editSection('education')"
                        class="text-blue-600 hover:text-blue-800 transition-colors">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <div class="text-gray-700 leading-relaxed whitespace-pre-wrap break-words">
                    {{ profileForm.value.education }}
                </div>
            </div>

            <!-- Skills Section -->
            <div
                class="bg-white rounded-lg shadow-[0_0_0_1px_rgba(0,0,0,0.08),0_2px_4px_rgba(0,0,0,0.1)] p-6 hover:shadow-[0_0_0_1px_rgba(0,0,0,0.12),0_4px_8px_rgba(0,0,0,0.15)] transition-shadow">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold text-gray-900">Skills</h2>
                    <button (click)="editSection('skills')" class="text-blue-600 hover:text-blue-800 transition-colors">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <div class="flex flex-wrap gap-2">
                    <span *ngFor="let skill of skillsArray"
                        class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">
                        {{ skill }}
                    </span>
                    <span *ngIf="!skillsArray.length" class="text-gray-500">No skills added yet.</span>
                </div>
            </div>

            <!-- Cover Letter Section -->
            <div
                class="bg-white rounded-lg shadow-[0_0_0_1px_rgba(0,0,0,0.08),0_2px_4px_rgba(0,0,0,0.1)] p-6 hover:shadow-[0_0_0_1px_rgba(0,0,0,0.12),0_4px_8px_rgba(0,0,0,0.15)] transition-shadow">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold text-gray-900">Cover Letter</h2>
                    <button (click)="editSection('coverLetter')"
                        class="text-blue-600 hover:text-blue-800 transition-colors">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <div class="text-gray-700 leading-relaxed whitespace-pre-wrap break-words">
                    <div *ngIf="profileForm.value.coverLetter; else noCoverLetter" class="cover-letter-content">
                        {{ profileForm.value.coverLetter }}
                    </div>
                    <ng-template #noCoverLetter>
                        <div class="text-center py-8 border-2 border-dashed border-gray-300 rounded-lg">
                            <i class="fas fa-file-alt text-4xl text-gray-400 mb-4"></i>
                            <p class="text-gray-500 mb-4">No cover letter added yet</p>
                            <button (click)="editSection('coverLetter')"
                                class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                                Add Cover Letter
                            </button>
                        </div>
                    </ng-template>
                </div>
            </div>
        </div>

        <!-- Right Column -->
        <div class="space-y-6">
            <!-- Resume Section -->
            <div
                class="bg-white rounded-lg shadow-[0_0_0_1px_rgba(0,0,0,0.08),0_2px_4px_rgba(0,0,0,0.1)] p-6 hover:shadow-[0_0_0_1px_rgba(0,0,0,0.12),0_4px_8px_rgba(0,0,0,0.15)] transition-shadow">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold text-gray-900">Resume/CV</h2>
                    <button (click)="editSection('resume')" class="text-blue-600 hover:text-blue-800 transition-colors">
                        <i class="fas fa-upload"></i>
                    </button>
                </div>

                <div *ngIf="profileForm.value.resume; else noResume" class="border border-gray-200 rounded-lg p-4">
                    <div class="flex items-center justify-between min-w-0">
                        <!-- File info always visible -->
                        <div class="min-w-0">
                            <p class="font-medium truncate">{{ profileForm.value.resume.name }}</p>
                            <p class="text-sm text-gray-500 truncate">{{ profileForm.value.resume.size }}</p>
                        </div>

                        <!-- Three dots menu (unchanged) -->
                        <div class="relative flex-shrink-0 ml-2">
                            <button (click)="showResumeDropdown = !showResumeDropdown"
                                class="text-gray-500 hover:text-gray-700 p-2 rounded-full hover:bg-gray-100 transition-colors">
                                <i class="fas fa-ellipsis-v"></i>
                            </button>
                            <div *ngIf="showResumeDropdown"
                                class="absolute right-0 top-full mt-1 w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-20">
                                <button (click)="viewResume(); showResumeDropdown = false"
                                    class="w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center rounded-t-lg">
                                    <i class="fas fa-eye mr-2 text-blue-600 w-4"></i> Preview
                                </button>
                                <button (click)="downloadResume(); showResumeDropdown = false"
                                    class="w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center">
                                    <i class="fas fa-download mr-2 text-green-600 w-4"></i> Download
                                </button>
                                <button (click)="editSection('resume'); showResumeDropdown = false"
                                    class="w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 flex items-center">
                                    <i class="fas fa-upload mr-2 text-gray-600 w-4"></i> Replace
                                </button>
                                <div class="border-t border-gray-200"></div>
                                <button (click)="removeResume(); showResumeDropdown = false"
                                    class="w-full text-left px-3 py-2 text-sm text-red-600 hover:bg-red-50 flex items-center rounded-b-lg">
                                    <i class="fas fa-trash mr-2 w-4"></i> Remove
                                </button>
                            </div>
                        </div>
                    </div>
                </div>


                <ng-template #noResume>
                    <div class="text-center py-8 border-2 border-dashed border-gray-300 rounded-lg">
                        <i class="fas fa-file-pdf text-4xl text-gray-400 mb-4"></i>
                        <p class="text-gray-500 mb-4">No resume uploaded</p>
                        <button (click)="editSection('resume')"
                            class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            Upload Resume
                        </button>
                    </div>
                </ng-template>
            </div>

            <!-- Job Preferences -->
            <div
                class="bg-white rounded-lg shadow-[0_0_0_1px_rgba(0,0,0,0.08),0_2px_4px_rgba(0,0,0,0.1)] p-6 hover:shadow-[0_0_0_1px_rgba(0,0,0,0.12),0_4px_8px_rgba(0,0,0,0.15)] transition-shadow">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-semibold text-gray-900">Job Preferences</h2>
                    <button (click)="editSection('jobPreferences')"
                        class="text-blue-600 hover:text-blue-800 transition-colors">
                        <i class="fas fa-edit"></i>
                    </button>
                </div>
                <div class="space-y-3">
                    <div>
                        <p class="text-sm font-medium text-gray-500">Desired Job Title</p>
                        <p class="text-gray-700 break-words">{{ profileForm.value.jobPreferences.title }}</p>
                    </div>
                    <div>
                        <p class="text-sm font-medium text-gray-500">Expected Salary</p>
                        <p class="text-gray-700 break-words">{{ profileForm.value.jobPreferences.salary }}</p>
                    </div>
                    <div>
                        <p class="text-sm font-medium text-gray-500">Work Type</p>
                        <p class="text-gray-700 break-words">{{ profileForm.value.jobPreferences.workType }}</p>
                    </div>
                    <div>
                        <p class="text-sm font-medium text-gray-500">Availability</p>
                        <p class="text-gray-700 break-words">{{ profileForm.value.jobPreferences.availability }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Done button -->
<div class="max-w-4xl mx-auto p-4 flex justify-end" *ngIf="profileForm && !isLoading && !editingSection">
    <button (click)="onDone()"
        class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center">
        <i class="fas fa-check-circle mr-2"></i> Done
    </button>
</div>

<!-- Loading State -->
<div *ngIf="isLoading" class="fixed inset-0 bg-white bg-opacity-50 flex items-center justify-center z-50">
    <div class="text-center">
        <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 mb-4"></div>
        <p class="text-lg font-medium text-gray-700">Loading profile...</p>
    </div>
</div>

<!-- Edit Modals -->
<div *ngIf="editingSection"
    class="fixed inset-0 bg-black/30 flex items-center justify-center z-50 backdrop-blur">
    <div class="bg-white rounded-lg p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto">
        <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-semibold">Edit {{ editingSection }}</h3>
            <button (click)="closeEdit()" class="text-gray-400 hover:text-gray-600">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <form [formGroup]="profileForm" (ngSubmit)="saveProfile()">
            <!-- Profile Edit -->
            <div *ngIf="editingSection === 'profile'" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500">*</span> Name
                    </label>
                    <input type="text" formControlName="name"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        [class.border-red-500]="profileForm.get('name')?.invalid && profileForm.get('name')?.touched">
                    <div *ngIf="profileForm.get('name')?.invalid && profileForm.get('name')?.touched"
                        class="text-red-500 text-xs mt-1">
                        Name is required and must be at least 2 characters
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Professional Headline</label>
                    <input type="text" formControlName="headline"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">
                        <span class="text-red-500">*</span> Email
                    </label>
                    <input type="email" formControlName="email"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        [class.border-red-500]="profileForm.get('email')?.invalid && profileForm.get('email')?.touched">
                    <div *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched"
                        class="text-red-500 text-xs mt-1">
                        Please enter a valid email address
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                    <input type="tel" formControlName="phone"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        [class.border-red-500]="profileForm.get('phone')?.invalid && profileForm.get('phone')?.touched"
                        placeholder="e.g. +1 (123) 456-7890">
                    <div *ngIf="profileForm.get('phone')?.invalid && profileForm.get('phone')?.touched"
                        class="text-red-500 text-xs mt-1">
                        Please enter a valid phone number
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Location</label>
                    <input type="text" formControlName="location"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
            </div>


            <!-- About Edit -->
            <div *ngIf="editingSection === 'about'" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">About</label>
                    <textarea formControlName="about" rows="6"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"
                        (input)="updateWordCount('about', $event)"></textarea>
                    <div class="flex justify-between text-xs text-gray-500 mt-1">
                        <span>{{ getWordCount('about') }} words</span>
                        <span>{{ getCharCount('about') }} characters</span>
                    </div>
                </div>
            </div>

            <!-- Experience Edit -->
            <div *ngIf="editingSection === 'experience'" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Experience</label>
                    <textarea formControlName="experience" rows="6"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"
                        (input)="updateWordCount('experience', $event)"></textarea>
                    <div class="flex justify-between text-xs text-gray-500 mt-1">
                        <span>{{ getWordCount('experience') }} words</span>
                        <span>{{ getCharCount('experience') }} characters</span>
                    </div>
                </div>
            </div>

            <!-- Education Edit -->
            <div *ngIf="editingSection === 'education'" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Education</label>
                    <textarea formControlName="education" rows="6"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"
                        (input)="updateWordCount('education', $event)"></textarea>
                    <div class="flex justify-between text-xs text-gray-500 mt-1">
                        <span>{{ getWordCount('education') }} words</span>
                        <span>{{ getCharCount('education') }} characters</span>
                    </div>
                </div>
            </div>

            <!-- Skills Edit -->
            <div *ngIf="editingSection === 'skills'" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Skills (comma separated)</label>
                    <textarea formControlName="skills" rows="4"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"
                        (input)="updateSkillsChips(); updateWordCount('skills', $event)" 
                        placeholder="JavaScript, Python, React, Node.js, etc."></textarea>
                    <div class="flex justify-between text-xs text-gray-500 mt-1">
                        <span>{{ getWordCount('skills') }} words</span>
                        <span>{{ getCharCount('skills') }} characters</span>
                    </div>
                    <div class="flex flex-wrap gap-2 mt-2">
                        <span *ngFor="let skill of skillsArray"
                            class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">
                            {{ skill }}
                        </span>
                    </div>
                </div>
            </div>

            <!-- Cover Letter Edit -->
            <div *ngIf="editingSection === 'coverLetter'" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Cover Letter <span class="text-red-500">*</span></label>
                    <textarea formControlName="coverLetter" rows="8"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"
                        (input)="updateWordCount('coverLetter', $event)" 
                        placeholder="Write a compelling cover letter that highlights your skills and experience. This will be used for quick apply applications..."></textarea>
                    <div class="flex justify-between text-xs text-gray-500 mt-1">
                        <span>{{ getWordCount('coverLetter') }} words</span>
                        <span>{{ getCharCount('coverLetter') }} characters</span>
                    </div>
                    <div class="mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md">
                        <div class="flex items-start">
                            <i class="fas fa-info-circle text-blue-600 mt-0.5 mr-2"></i>
                            <div class="text-sm text-blue-800">
                                <p class="font-medium">Quick Apply Feature</p>
                                <p>This cover letter will be automatically used when you apply for jobs using the "Quick Apply" option.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Resume Edit -->
            <div *ngIf="editingSection === 'resume'" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Upload Resume (PDF/DOC)</label>
                    <!-- Hidden file input -->
                    <input type="file" (change)="onResumeUpload($event)" accept=".pdf,.doc,.docx" #fileInput
                        class="hidden">
                    <!-- Custom styled upload button -->
                    <div (click)="fileInput.click()"
                        class="mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md cursor-pointer hover:border-blue-500 transition-colors">
                        <div class="space-y-1 text-center">
                            <i class="fas fa-cloud-upload-alt text-3xl text-gray-400 mx-auto"></i>
                            <div class="flex text-sm text-gray-600">
                                <p class="pl-1">Click to select a file</p>
                            </div>
                            <p class="text-xs text-gray-500">PDF or DOC up to 5MB</p>
                        </div>
                    </div>
                    <!-- Current file display -->
                    <div *ngIf="profileForm.value.resume" class="mt-3 p-3 bg-gray-50 rounded-md">
                        <p class="font-medium">{{ profileForm.value.resume.name }}</p>
                        <p class="text-sm text-gray-500">{{ profileForm.value.resume.size }}</p>
                    </div>
                </div>
            </div>

            <!-- Job Preferences Edit -->
            <div *ngIf="editingSection === 'jobPreferences'" class="space-y-4" formGroupName="jobPreferences">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Desired Job Title</label>
                    <input formControlName="title" type="text"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Expected Salary</label>
                    <input formControlName="salary" type="text"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                        [class.border-red-500]="profileForm.get('jobPreferences.salary')?.invalid && profileForm.get('jobPreferences.salary')?.touched"
                        placeholder="e.g. 50,000">
                    <div *ngIf="profileForm.get('jobPreferences.salary')?.invalid && profileForm.get('jobPreferences.salary')?.touched"
                        class="text-red-500 text-xs mt-1">
                        Please enter a valid salary (e.g. 50000)
                    </div>

                    <label class="block text-sm font-medium text-gray-700 mb-1">Work Type</label>
                    <select formControlName="workType"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">Select work type</option>
                        <option value="Full-time">Full-time</option>
                        <option value="Part-time">Part-time</option>
                        <option value="Contract">Contract</option>
                        <option value="Freelance">Freelance</option>
                        <option value="Remote">Remote</option>
                        <option value="Hybrid">Hybrid</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Availability</label>
                    <select formControlName="availability"
                        class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="Immediately">Immediately</option>
                        <option value="Within 1 week">Within 1 week</option>
                        <option value="Within 2 weeks">Within 2 weeks</option>
                        <option value="Within 1 month">Within 1 month</option>
                        <option value="Custom">Custom</option>
                    </select>
                </div>
            </div>

            <div class="flex gap-3 mt-6">
                <button type="button" (click)="closeEdit()"
                    class="flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors">
                    Cancel
                </button>

                <button type="button" (click)="saveAndClose()"
                    class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center"
                    [disabled]="isLoading || profileForm.invalid">
                    <span *ngIf="!isLoading">Save Changes</span>
                    <span *ngIf="isLoading" class="flex items-center">
                        <i class="fas fa-spinner fa-spin mr-2"></i> Saving...
                    </span>
                </button>

            </div>
        </form>
    </div>
</div>